<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>-</title>
  <style>
    html { line-height: 1.5; font-family: Georgia, serif; font-size: 20px; color: #1a1a1a; background-color: #fdfdfd; }
    body { margin: 0 auto; max-width: 36em; padding: 50px; }
    pre > code.sourceCode { white-space: pre; }
  </style>
</head>
<body>
<h1>ğŸ“˜ EspecificaciÃ³n de Intercambio JSON â€“ Juego Educativo</h1>
<p>Este documento detalla todos los formatos de JSON que el <strong>cliente puede enviar</strong> y los que el <strong>servidor puede devolver</strong> en las distintas fases del juego.</p>
<hr />

<h2>ğŸŸ¢ 1. Registro de jugador</h2>
<h3>ğŸ“¤ Cliente envÃ­a:</h3>
<pre><code>{}</code></pre>

<h3>ğŸ“¥ Servidor responde:</h3>
<h4>Primer jugador:</h4>
<pre><code>{
  "session_id": 10,
  "player_id": 25,
  "numero_jugador": 1,
  "status": "en espera"
}</code></pre>

<h4>Segundo jugador:</h4>
<pre><code>{
  "session_id": 10,
  "player_id": 26,
  "numero_jugador": 2,
  "status": "en espera"
}</code></pre>

<hr />
<h2>ğŸ”„ 2. Polling de estado de sesiÃ³n</h2>
<h3>ğŸ“¤ Cliente:</h3>
<pre><code>{
  "session_id": 10,
  "player_id": 25,
  "numero_jugador": 1
}</code></pre>

<h3>ğŸ“¥ Servidor responde:</h3>
<h4>Si la sesiÃ³n sigue en espera:</h4>
<pre><code>{
  "status": "en espera",
  "message": "La sesiÃ³n no estÃ¡ activa.",
  "session_id": 10,
  "player_id": 25,
  "numero_jugador": 1
}</code></pre>

<h4>Si la sesiÃ³n estÃ¡ lista para jugar:</h4>
<pre><code>{
  "session_id": 10,
  "board_id": 7,
  "player_id": 25,
  "numero_jugador": 1,
  "op1": 3,
  "op2": 6,
  "ex_num": 1,
  "puntaje": 0,
  "skips": 0,
  "rival": 0
}</code></pre>

<hr />
<h2>ğŸ® 3. EnvÃ­o de respuestas o skip</h2>
<h3>ğŸ“¤ Cliente (respuesta):</h3>
<pre><code>{
  "session_id": 10,
  "player_id": 25,
  "numero_jugador": 1,
  "skip": false,
  "skips": 1,
  "aciertos": 3,
  "rival": 2,
  "ex_num": 4,
  "res": 36
}</code></pre>

<h3>ğŸ“¤ Cliente (skip):</h3>
<pre><code>{
  "session_id": 10,
  "player_id": 25,
  "numero_jugador": 1,
  "skip": true,
  "skips": 1,
  "aciertos": 3,
  "rival": 2,
  "ex_num": 4,
  "res": 0
}</code></pre>

<h3>ğŸ“¥ Servidor responde (respuesta correcta o skip vÃ¡lido):</h3>
<pre><code>{
  "session_id": 10,
  "board_id": 7,
  "player_id": 25,
  "numero_jugador": 1,
  "op1": 2,
  "op2": 5,
  "ex_num": 5,
  "puntaje": 4,
  "skips": 1,
  "rival": 2
}</code></pre>

<h3>ğŸ“¥ Servidor responde (respuesta incorrecta):</h3>
<pre><code>{
  "session_id": 10,
  "board_id": 7,
  "player_id": 25,
  "numero_jugador": 1,
  "op1": 2,
  "op2": 5,
  "ex_num": 4,
  "puntaje": 3,
  "skips": 1,
  "rival": 2
}</code></pre>

<h3>ğŸ“¥ Servidor responde (ya hizo 3 skips):</h3>
<pre><code>{
  "session_id": 10,
  "board_id": 7,
  "player_id": 25,
  "numero_jugador": 1,
  "op1": 2,
  "op2": 5,
  "ex_num": 4,
  "puntaje": 3,
  "skips": 3,
  "rival": 2
}</code></pre>

<hr />
<h2>ğŸ 4. Final de partida</h2>
<h3>ğŸ“¥ Ejemplo (ganaste):</h3>
<pre><code>{
  "resultado": "ganaste",
  "puntaje": 10,
  "rival": 0,
  "session_id": 53,
  "board_id": 53,
  "player_id": 106,
  "numero_jugador": 2
}</code></pre>

<h3>ğŸ“¥ Ejemplo (perdiste):</h3>
<pre><code>{
  "resultado": "perdiste",
  "puntaje": 6,
  "rival": 2,
  "session_id": 53,
  "board_id": 53,
  "player_id": 106,
  "numero_jugador": 2
}</code></pre>

<hr />
<h2>âŒ 5. Posibles errores</h2>
<h3>Jugador no existe:</h3>
<pre><code>{
  "error": "Jugador no encontrado en la sesiÃ³n",
  "session_id": 10,
  "player_id": 999,
  "players_disponibles": [25, 26]
}</code></pre>

<h3>Ejercicio desincronizado:</h3>
<pre><code>{
  "error": "NÃºmero de ejercicio desincronizado",
  "esperado": 5,
  "recibido": 4,
  "session_id": 10,
  "board_id": 7,
  "numero_jugador": 1,
  "player_id": 25
}</code></pre>

<h3>Puntaje desincronizado:</h3>
<pre><code>{
  "error": "Puntaje desincronizado",
  "esperado": 4,
  "recibido": 3,
  "session_id": 10,
  "board_id": 7,
  "numero_jugador": 1,
  "player_id": 25
}</code></pre>

<hr />
<h2>ğŸ“Œ Notas finales</h2>
<ul>
  <li>El campo <code>ex_num</code> va de 1 a 13 y representa la posiciÃ³n en el tablero.</li>
  <li>El cliente debe respetar la sincronizaciÃ³n de <code>puntaje</code> y <code>ex_num</code>.</li>
  <li>Si el juego ya terminÃ³ (estado <code>"finalizada"</code>), el servidor informarÃ¡ el resultado mediante el objeto con <code>resultado</code> mostrado arriba.</li>
</ul>
</body>
</html>
